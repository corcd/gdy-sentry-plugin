"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Sentry=require("@sentry/browser"),Report=function(e){try{var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};setTimeout((function(){"info"===e?(Sentry.setExtra("data",r),Sentry.captureMessage(t,"info")):"error"===e&&(Sentry.setExtra("data",r),Sentry.captureException(new Error(t))),Promise.resolve().then((function(){n()}))}),o.outtime)},r=function(e,t){switch(e){case"done":Sentry.setExtra("data",t),Sentry.captureException(new Error("Api Error"));break;case"error":Sentry.setExtra("data",t),Sentry.captureException(new Error("Request Error"))}},n=function(){window.performance&&window.performance.clearResourceTimings&&performance.clearResourceTimings()},o={dsn:"",version:"1.0.0",env:"",appid:"",uin:0,name:"",outtime:300,filterUrl:[],isPage:!0,isAjax:!0,isError:!0};Object.assign(o,e),o.filterUrl=o.filterUrl.concat(["/api/v1/report/web","livereload.js?snipver=1","/sockjs-node/info"]);var i="";switch(o.env){case"TEST":i="development";break;case"PRE":i="preview";break;case"":default:i="production"}Sentry.init({dsn:o.dsn,release:o.version,environment:i}),Sentry.setUser({AppId:o.appid,Uin:o.uin,Name:o.name,Environment:i}),o.isError&&function(){window.addEventListener("error",(function(e){var r={t:(new Date).getTime(),msg:e.target.localName+" is load error",target:e.target.localName,type:e.type,resourceUrl:e.target.href||e.target.currentSrc};t("error","Resource Error",r)}),!0),window.onerror=function(e,r,n,o,i){setTimeout((function(){o=o||window.event&&window.event.errorCharacter||0;var a={t:(new Date).getTime(),msg:i&&i.stack?i.stack.toString():e,resourceUrl:r,line:n,col:o};t("error","Script Error",a)}),0)},window.addEventListener("unhandledrejection",(function(e){var r,n,o,i=e&&e.reason,a=i.message||"",s=(i.stack||"").match(/\(.+?\)/);s&&s.length&&(s=(s=s[0]).replace(/\w.+[js|html]/g,(function(e){return r=e,""}))),(s=s.split(":"))&&s.length>1&&(o=parseInt(s[1]||0,10)),n=parseInt(s[2]||0,10);var c={t:(new Date).getTime(),msg:a,resourceUrl:r,line:n,col:o};t("error","Unhandledrejection",c)}));var e=console.error;console.error=function(r){return setTimeout((function(){var e={t:(new Date).getTime(),msg:r,resourceUrl:location.href};t("error","Console Error",e)}),0),e.apply(console,arguments)}}(),(o.isAjax||o.isError)&&function(e){function t(t){return function(){var r=this.hasOwnProperty(t+"_")?this[t+"_"]:this.xhr[t],n=(e[t]||{}).getter;return n&&n(r,this)||r}}function r(t){return function(r){var n=this.xhr,o=this,i=e[t];if("function"==typeof i)n[t]=function(){e[t](o)||r.apply(n,arguments)};else{var a=(i||{}).setter;r=a&&a(r,o)||r;try{n[t]=r}catch(e){this[t+"_"]=r}}}}function n(t){return function(){var r=[].slice.call(arguments);if(!e[t]||!e[t].call(this,r,this.xhr))return this.xhr[t].apply(this.xhr,r)}}window._ahrealxhr=window._ahrealxhr||XMLHttpRequest,XMLHttpRequest=function(){for(var e in this.xhr=new window._ahrealxhr,this.xhr){var o="";try{o=_typeof(this.xhr[e])}catch(e){}"function"===o?this[e]=n(e):Object.defineProperty(this,e,{get:t(e),set:r(e)})}},window._ahrealxhr}({onreadystatechange:function(e){4===e.readyState&&setTimeout((function(){e.xhr.responseURL&&e.xhr.responseURL.split("?")[0];if(e.status<200||e.status>300){e.method=e.args.method;var t=JSON.parse(e.xhr.response),n={status:e.status,statusText:e.xhr.statusText||"",method:e.args.method,responseURL:e.args.url,response:t||{}};r("done",n)}else{var o=JSON.parse(e.xhr.response);if(0!==Number(o.errorCode)){var i={status:e.status,statusText:e.xhr.statusText||"",method:e.args.method,responseURL:e.args.url,response:o||{},errorCode:o.errorCode,errorMessage:o.errorMessage};r("done",i)}}}),600)},onerror:function(e){if(e.args){var t={method:e.args.method,responseURL:e.args.url,statusText:"xhr request error"};r("error",t)}},open:function(e,t){if(o.filterUrl&&o.filterUrl.length){var r=!1;if(o.filterUrl.forEach((function(t){-1!=e[1].indexOf(t)&&(r=!0)})),r)return}this.args={url:e[1].split("?")[0],method:e[0]||"GET",type:"xmlhttprequest"},n()}}),window.addEventListener("load",(function(){!function(){if(window.performance){var e=performance.timing,r={width:document.documentElement.clientWidth||document.body.clientWidth,height:document.documentElement.clientHeight||document.body.clientHeight,dnst:e.domainLookupEnd-e.domainLookupStart||0,tcpt:e.connectEnd-e.connectStart||0,wit:e.responseStart-e.navigationStart||0,domt:e.domContentLoadedEventEnd-e.navigationStart||0,lodt:e.loadEventEnd-e.navigationStart||0,radt:e.fetchStart-e.navigationStart||0,rdit:e.redirectEnd-e.redirectStart||0,uodt:e.unloadEventEnd-e.unloadEventStart||0,reqt:e.responseEnd-e.requestStart||0,andt:e.domComplete-e.domInteractive||0};t("info","Page Performance",r)}}()}),!1)}catch(e){}};"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=Report:"function"==typeof define&&define.amd?define([],(function(){return Report})):window.Vue?(window.Report=Report,Vue.use(Report)):module.exports=Report;